(()=>{var e={259:(e,t,n)=>{"use strict";const i=n(849).buildOptions,s={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataTagName:!1,cdataPositionChar:"\\c",format:!1,indentBy:"  ",supressEmptyNode:!1,tagValueProcessor:function(e){return e},attrValueProcessor:function(e){return e}},r=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","cdataTagName","cdataPositionChar","format","indentBy","supressEmptyNode","tagValueProcessor","attrValueProcessor","rootNodeName"];function a(e){this.options=i(e,s,r),this.options.ignoreAttributes||this.options.attrNodeName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=f),this.options.cdataTagName?this.isCDATA=g:this.isCDATA=function(){return!1},this.replaceCDATAstr=o,this.replaceCDATAarr=l,this.options.format?(this.indentate=p,this.tagEndChar=">\n",this.newLine="\n"):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine=""),this.options.supressEmptyNode?(this.buildTextNode=h,this.buildObjNode=u):(this.buildTextNode=d,this.buildObjNode=c),this.buildTextValNode=d,this.buildObjectNode=c}function o(e,t){return e=this.options.tagValueProcessor(""+e),""===this.options.cdataPositionChar||""===e?e+"<![CDATA["+t+"]]"+this.tagEndChar:e.replace(this.options.cdataPositionChar,"<![CDATA["+t+"]]"+this.tagEndChar)}function l(e,t){if(e=this.options.tagValueProcessor(""+e),""===this.options.cdataPositionChar||""===e)return e+"<![CDATA["+t.join("]]><![CDATA[")+"]]"+this.tagEndChar;for(let n in t)e=e.replace(this.options.cdataPositionChar,"<![CDATA["+t[n]+"]]>");return e+this.newLine}function c(e,t,n,i){return n&&!e.includes("<")?this.indentate(i)+"<"+t+n+">"+e+"</"+t+this.tagEndChar:this.indentate(i)+"<"+t+n+this.tagEndChar+e+this.indentate(i)+"</"+t+this.tagEndChar}function u(e,t,n,i){return""!==e?this.buildObjectNode(e,t,n,i):this.indentate(i)+"<"+t+n+"/"+this.tagEndChar}function d(e,t,n,i){return this.indentate(i)+"<"+t+n+">"+this.options.tagValueProcessor(e)+"</"+t+this.tagEndChar}function h(e,t,n,i){return""!==e?this.buildTextValNode(e,t,n,i):this.indentate(i)+"<"+t+n+"/"+this.tagEndChar}function p(e){return this.options.indentBy.repeat(e)}function f(e){return!!e.startsWith(this.options.attributeNamePrefix)&&e.substr(this.attrPrefixLen)}function g(e){return e===this.options.cdataTagName}a.prototype.parse=function(e){return Array.isArray(e)&&this.options.rootNodeName&&this.options.rootNodeName.length>1&&(e={[this.options.rootNodeName]:e}),this.j2x(e,0).val},a.prototype.j2x=function(e,t){let n="",i="";const s=Object.keys(e),r=s.length;for(let a=0;a<r;a++){const r=s[a];if(void 0===e[r]);else if(null===e[r])i+=this.indentate(t)+"<"+r+"/"+this.tagEndChar;else if(e[r]instanceof Date)i+=this.buildTextNode(e[r],r,"",t);else if("object"!=typeof e[r]){const s=this.isAttribute(r);s?n+=" "+s+'="'+this.options.attrValueProcessor(""+e[r])+'"':this.isCDATA(r)?e[this.options.textNodeName]?i+=this.replaceCDATAstr(e[this.options.textNodeName],e[r]):i+=this.replaceCDATAstr("",e[r]):r===this.options.textNodeName?e[this.options.cdataTagName]||(i+=this.options.tagValueProcessor(""+e[r])):i+=this.buildTextNode(e[r],r,"",t)}else if(Array.isArray(e[r]))if(this.isCDATA(r))i+=this.indentate(t),e[this.options.textNodeName]?i+=this.replaceCDATAarr(e[this.options.textNodeName],e[r]):i+=this.replaceCDATAarr("",e[r]);else{const n=e[r].length;for(let s=0;s<n;s++){const n=e[r][s];if(void 0===n);else if(null===n)i+=this.indentate(t)+"<"+r+"/"+this.tagEndChar;else if("object"==typeof n){const e=this.j2x(n,t+1);i+=this.buildObjNode(e.val,r,e.attrStr,t)}else i+=this.buildTextNode(n,r,"",t)}}else if(this.options.attrNodeName&&r===this.options.attrNodeName){const t=Object.keys(e[r]),i=t.length;for(let s=0;s<i;s++)n+=" "+t[s]+'="'+this.options.attrValueProcessor(""+e[r][t[s]])+'"'}else{const n=this.j2x(e[r],t+1);i+=this.buildObjNode(n.val,r,n.attrStr,t)}}return{attrStr:n,val:i}},e.exports=a},398:(e,t,n)=>{"use strict";const i=function(e){return String.fromCharCode(e)},s={nilChar:i(176),missingChar:i(201),nilPremitive:i(175),missingPremitive:i(200),emptyChar:i(178),emptyValue:i(177),boundryChar:i(179),objStart:i(198),arrStart:i(204),arrayEnd:i(185)},r=[s.nilChar,s.nilPremitive,s.missingChar,s.missingPremitive,s.boundryChar,s.emptyChar,s.emptyValue,s.arrayEnd,s.objStart,s.arrStart],a=function(e,t,n){if("string"==typeof t)return e&&e[0]&&void 0!==e[0].val?o(e[0].val,t):o(e,t);{const r=void 0===(i=e)?s.missingChar:null===i?s.nilChar:!(i.child&&0===Object.keys(i.child).length&&(!i.attrsMap||0===Object.keys(i.attrsMap).length))||s.emptyChar;if(!0===r){let i="";if(Array.isArray(t)){i+=s.arrStart;const r=t[0],c=e.length;if("string"==typeof r)for(let t=0;t<c;t++){const n=o(e[t].val,r);i=l(i,n)}else for(let t=0;t<c;t++){const s=a(e[t],r,n);i=l(i,s)}i+=s.arrayEnd}else{i+=s.objStart;const r=Object.keys(t);Array.isArray(e)&&(e=e[0]);for(let s in r){const o=r[s];let c;c=!n.ignoreAttributes&&e.attrsMap&&e.attrsMap[o]?a(e.attrsMap[o],t[o],n):o===n.textNodeName?a(e.val,t[o],n):a(e.child[o],t[o],n),i=l(i,c)}}return i}return r}var i},o=function(e){switch(e){case void 0:return s.missingPremitive;case null:return s.nilPremitive;case"":return s.emptyValue;default:return e}},l=function(e,t){return c(t[0])||c(e[e.length-1])||(e+=s.boundryChar),e+t},c=function(e){return-1!==r.indexOf(e)},u=n(543),d=n(849).buildOptions;t.convert2nimn=function(e,t,n){return n=d(n,u.defaultOptions,u.props),a(e,t,n)}},284:(e,t,n)=>{"use strict";const i=n(849),s=function(e,t,n){const r={};if(!t.alwaysCreateTextNode&&(!e.child||i.isEmptyObject(e.child))&&(!e.attrsMap||i.isEmptyObject(e.attrsMap)))return i.isExist(e.val)?e.val:"";if(i.isExist(e.val)&&("string"!=typeof e.val||""!==e.val&&e.val!==t.cdataPositionChar)){const s=i.isTagNameInArrayMode(e.tagname,t.arrayMode,n);r[t.textNodeName]=s?[e.val]:e.val}i.merge(r,e.attrsMap,t.arrayMode);const a=Object.keys(e.child);for(let o=0;o<a.length;o++){const l=a[o];if(e.child[l]&&e.child[l].length>1){r[l]=[];for(let n in e.child[l])e.child[l].hasOwnProperty(n)&&r[l].push(s(e.child[l][n],t,l))}else{const a=s(e.child[l][0],t,l),o=!0===t.arrayMode&&"object"==typeof a||i.isTagNameInArrayMode(l,t.arrayMode,n);r[l]=o?[a]:a}}return r};t.convertToJson=s},702:(e,t,n)=>{"use strict";const i=n(849),s=n(849).buildOptions,r=n(543),a=function(e,t,n){let s="{";const r=Object.keys(e.child);for(let n=0;n<r.length;n++){const i=r[n];if(e.child[i]&&e.child[i].length>1){s+='"'+i+'" : [ ';for(let n in e.child[i])s+=a(e.child[i][n],t)+" , ";s=s.substr(0,s.length-1)+" ] "}else s+='"'+i+'" : '+a(e.child[i][0],t)+" ,"}return i.merge(s,e.attrsMap),i.isEmptyObject(s)?i.isExist(e.val)?e.val:"":(i.isExist(e.val)&&("string"!=typeof e.val||""!==e.val&&e.val!==t.cdataPositionChar)&&(s+='"'+t.textNodeName+'" : '+(!0!==(o=e.val)&&!1!==o&&isNaN(o)?'"'+o+'"':o)),","===s[s.length-1]&&(s=s.substr(0,s.length-2)),s+"}");var o};t.convertToJsonString=function(e,t){return(t=s(t,r.defaultOptions,r.props)).indentBy=t.indentBy||"",a(e,t,0)}},965:(e,t,n)=>{"use strict";const i=n(284),s=n(543),r=n(543),a=n(849).buildOptions,o=n(501);t.parse=function(e,t={},n){if(n){!0===n&&(n={});const t=o.validate(e,n);if(!0!==t)throw Error(t.err.msg)}t.parseTrueNumberOnly&&!1!==t.parseNodeValue&&!t.numParseOptions&&(t.numParseOptions={leadingZeros:!1});let l=a(t,r.defaultOptions,r.props);const c=s.getTraversalObj(e,l);return i.convertToJson(c,l)},t.convertTonimn=n(398).convert2nimn,t.getTraversalObj=s.getTraversalObj,t.convertToJson=i.convertToJson,t.convertToJsonString=n(702).convertToJsonString,t.validate=o.validate,t.j2xParser=n(259),t.parseToNimn=function(e,n,i){return t.convertTonimn(t.getTraversalObj(e,i),n,i)}},849:(e,t)=>{"use strict";const n="[:A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*",i=new RegExp("^"+n+"$");t.isExist=function(e){return void 0!==e},t.isEmptyObject=function(e){return 0===Object.keys(e).length},t.merge=function(e,t,n){if(t){const i=Object.keys(t),s=i.length;for(let r=0;r<s;r++)e[i[r]]="strict"===n?[t[i[r]]]:t[i[r]]}},t.getValue=function(e){return t.isExist(e)?e:""},t.buildOptions=function(e,t,n){let i={};if(!e)return t;for(let s=0;s<n.length;s++)void 0!==e[n[s]]?i[n[s]]=e[n[s]]:i[n[s]]=t[n[s]];return i},t.isTagNameInArrayMode=function(e,t,n){return!1!==t&&(t instanceof RegExp?t.test(e):"function"==typeof t?!!t(e,n):"strict"===t)},t.isName=function(e){return!(null==i.exec(e))},t.getAllMatches=function(e,t){const n=[];let i=t.exec(e);for(;i;){const s=[];s.startIndex=t.lastIndex-i[0].length;const r=i.length;for(let e=0;e<r;e++)s.push(i[e]);n.push(s),i=t.exec(e)}return n},t.nameRegexp=n},501:(e,t,n)=>{"use strict";const i=n(849),s={allowBooleanAttributes:!1},r=["allowBooleanAttributes"];function a(e,t){const n=t;for(;t<e.length;t++)if("?"!=e[t]&&" "!=e[t]);else{const i=e.substr(n,t-n);if(t>5&&"xml"===i)return h("InvalidXml","XML declaration allowed only at the start of the document.",f(e,t));if("?"==e[t]&&">"==e[t+1]){t++;break}}return t}function o(e,t){if(e.length>t+5&&"-"===e[t+1]&&"-"===e[t+2]){for(t+=3;t<e.length;t++)if("-"===e[t]&&"-"===e[t+1]&&">"===e[t+2]){t+=2;break}}else if(e.length>t+8&&"D"===e[t+1]&&"O"===e[t+2]&&"C"===e[t+3]&&"T"===e[t+4]&&"Y"===e[t+5]&&"P"===e[t+6]&&"E"===e[t+7]){let n=1;for(t+=8;t<e.length;t++)if("<"===e[t])n++;else if(">"===e[t]&&(n--,0===n))break}else if(e.length>t+9&&"["===e[t+1]&&"C"===e[t+2]&&"D"===e[t+3]&&"A"===e[t+4]&&"T"===e[t+5]&&"A"===e[t+6]&&"["===e[t+7])for(t+=8;t<e.length;t++)if("]"===e[t]&&"]"===e[t+1]&&">"===e[t+2]){t+=2;break}return t}function l(e,t){let n="",i="",s=!1;for(;t<e.length;t++){if('"'===e[t]||"'"===e[t])""===i?i=e[t]:i!==e[t]||(i="");else if(">"===e[t]&&""===i){s=!0;break}n+=e[t]}return""===i&&{value:n,index:t,tagClosed:s}}t.validate=function(e,t){t=i.buildOptions(t,s,r);const n=[];let c=!1,p=!1;"\ufeff"===e[0]&&(e=e.substr(1));for(let s=0;s<e.length;s++)if("<"===e[s]&&"?"===e[s+1]){if(s+=2,s=a(e,s),s.err)return s}else{if("<"!==e[s]){if(" "===e[s]||"\t"===e[s]||"\n"===e[s]||"\r"===e[s])continue;return h("InvalidChar","char '"+e[s]+"' is not expected.",f(e,s))}{let r=s;if(s++,"!"===e[s]){s=o(e,s);continue}{let m=!1;"/"===e[s]&&(m=!0,s++);let y="";for(;s<e.length&&">"!==e[s]&&" "!==e[s]&&"\t"!==e[s]&&"\n"!==e[s]&&"\r"!==e[s];s++)y+=e[s];if(y=y.trim(),"/"===y[y.length-1]&&(y=y.substring(0,y.length-1),s--),g=y,!i.isName(g)){let t;return t=0===y.trim().length?"Invalid space after '<'.":"Tag '"+y+"' is an invalid name.",h("InvalidTag",t,f(e,s))}const v=l(e,s);if(!1===v)return h("InvalidAttr","Attributes for '"+y+"' have open quote.",f(e,s));let b=v.value;if(s=v.index,"/"===b[b.length-1]){const n=s-b.length;b=b.substring(0,b.length-1);const i=u(b,t);if(!0!==i)return h(i.err.code,i.err.msg,f(e,n+i.err.line));c=!0}else if(m){if(!v.tagClosed)return h("InvalidTag","Closing tag '"+y+"' doesn't have proper closing.",f(e,s));if(b.trim().length>0)return h("InvalidTag","Closing tag '"+y+"' can't have attributes or invalid starting.",f(e,r));{const t=n.pop();if(y!==t.tagName){let n=f(e,t.tagStartPos);return h("InvalidTag","Expected closing tag '"+t.tagName+"' (opened in line "+n.line+", col "+n.col+") instead of closing tag '"+y+"'.",f(e,r))}0==n.length&&(p=!0)}}else{const i=u(b,t);if(!0!==i)return h(i.err.code,i.err.msg,f(e,s-b.length+i.err.line));if(!0===p)return h("InvalidXml","Multiple possible root nodes found.",f(e,s));n.push({tagName:y,tagStartPos:r}),c=!0}for(s++;s<e.length;s++)if("<"===e[s]){if("!"===e[s+1]){s++,s=o(e,s);continue}if("?"!==e[s+1])break;if(s=a(e,++s),s.err)return s}else if("&"===e[s]){const t=d(e,s);if(-1==t)return h("InvalidChar","char '&' is not expected.",f(e,s));s=t}"<"===e[s]&&s--}}}var g;return c?1==n.length?h("InvalidTag","Unclosed tag '"+n[0].tagName+"'.",f(e,n[0].tagStartPos)):!(n.length>0)||h("InvalidXml","Invalid '"+JSON.stringify(n.map((e=>e.tagName)),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1}):h("InvalidXml","Start tag expected.",1)};const c=new RegExp("(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['\"])(([\\s\\S])*?)\\5)?","g");function u(e,t){const n=i.getAllMatches(e,c),s={};for(let e=0;e<n.length;e++){if(0===n[e][1].length)return h("InvalidAttr","Attribute '"+n[e][2]+"' has no space in starting.",g(n[e]));if(void 0===n[e][3]&&!t.allowBooleanAttributes)return h("InvalidAttr","boolean attribute '"+n[e][2]+"' is not allowed.",g(n[e]));const i=n[e][2];if(!p(i))return h("InvalidAttr","Attribute '"+i+"' is an invalid name.",g(n[e]));if(s.hasOwnProperty(i))return h("InvalidAttr","Attribute '"+i+"' is repeated.",g(n[e]));s[i]=1}return!0}function d(e,t){if(";"===e[++t])return-1;if("#"===e[t])return function(e,t){let n=/\d/;for("x"===e[t]&&(t++,n=/[\da-fA-F]/);t<e.length;t++){if(";"===e[t])return t;if(!e[t].match(n))break}return-1}(e,++t);let n=0;for(;t<e.length;t++,n++)if(!(e[t].match(/\w/)&&n<20)){if(";"===e[t])break;return-1}return t}function h(e,t,n){return{err:{code:e,msg:t,line:n.line||n,col:n.col}}}function p(e){return i.isName(e)}function f(e,t){const n=e.substring(0,t).split(/\r?\n/);return{line:n.length,col:n[n.length-1].length+1}}function g(e){return e.startIndex+e[1].length}},468:e=>{"use strict";e.exports=function(e,t,n){this.tagname=e,this.parent=t,this.child={},this.attrsMap={},this.val=n,this.addChild=function(e){Array.isArray(this.child[e.tagname])?this.child[e.tagname].push(e):this.child[e.tagname]=[e]}}},543:(e,t,n)=>{"use strict";const i=n(849),s=n(849).buildOptions,r=n(468),a=n(153);"<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,i.nameRegexp),!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const o={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,ignoreNameSpace:!1,allowBooleanAttributes:!1,parseNodeValue:!0,parseAttributeValue:!1,arrayMode:!1,trimValues:!0,cdataTagName:!1,cdataPositionChar:"\\c",numParseOptions:{hex:!0,leadingZeros:!0},tagValueProcessor:function(e,t){return e},attrValueProcessor:function(e,t){return e},stopNodes:[],alwaysCreateTextNode:!1};t.defaultOptions=o;const l=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","ignoreNameSpace","allowBooleanAttributes","parseNodeValue","parseAttributeValue","arrayMode","trimValues","cdataTagName","cdataPositionChar","tagValueProcessor","attrValueProcessor","parseTrueNumberOnly","numParseOptions","stopNodes","alwaysCreateTextNode"];function c(e,t,n){return t&&(n.trimValues&&(t=t.trim()),t=d(t=n.tagValueProcessor(t,e),n.parseNodeValue,n.numParseOptions)),t}function u(e,t){if(t.ignoreNameSpace){const t=e.split(":"),n="/"===e.charAt(0)?"/":"";if("xmlns"===t[0])return"";2===t.length&&(e=n+t[1])}return e}function d(e,t,n){if(t&&"string"==typeof e){const t=e.trim();return"true"===t||"false"!==t&&a(e,n)}return i.isExist(e)?e:""}t.props=l;const h=new RegExp("([^\\s=]+)\\s*(=\\s*(['\"])(.*?)\\3)?","g");function p(e,t){if(!t.ignoreAttributes&&"string"==typeof e){e=e.replace(/\r?\n/g," ");const n=i.getAllMatches(e,h),s=n.length,r={};for(let e=0;e<s;e++){const i=u(n[e][1],t);i.length&&(void 0!==n[e][4]?(t.trimValues&&(n[e][4]=n[e][4].trim()),n[e][4]=t.attrValueProcessor(n[e][4],i),r[t.attributeNamePrefix+i]=d(n[e][4],t.parseAttributeValue,t.numParseOptions)):t.allowBooleanAttributes&&(r[t.attributeNamePrefix+i]=!0))}if(!Object.keys(r).length)return;if(t.attrNodeName){const e={};return e[t.attrNodeName]=r,e}return r}}function f(e,t){let n,i="";for(let s=t;s<e.length;s++){let t=e[s];if(n)t===n&&(n="");else if('"'===t||"'"===t)n=t;else{if(">"===t)return{data:i,index:s};"\t"===t&&(t=" ")}i+=t}}function g(e,t,n,i){const s=e.indexOf(t,n);if(-1===s)throw new Error(i);return s+t.length-1}t.getTraversalObj=function(e,t){e=e.replace(/\r\n?/g,"\n"),t=s(t,o,l);const n=new r("!xml");let a=n,u="";for(let n=0;n<e.length;n++)if("<"===e[n])if("/"===e[n+1]){const s=g(e,">",n,"Closing Tag is not closed.");let r=e.substring(n+2,s).trim();if(t.ignoreNameSpace){const e=r.indexOf(":");-1!==e&&(r=r.substr(e+1))}a&&(a.val?a.val=i.getValue(a.val)+""+c(r,u,t):a.val=c(r,u,t)),t.stopNodes.length&&t.stopNodes.includes(a.tagname)&&(a.child=[],null==a.attrsMap&&(a.attrsMap={}),a.val=e.substr(a.startIndex+1,n-a.startIndex-1)),a=a.parent,u="",n=s}else if("?"===e[n+1])n=g(e,"?>",n,"Pi Tag is not closed.");else if("!--"===e.substr(n+1,3))n=g(e,"--\x3e",n,"Comment is not closed.");else if("!D"===e.substr(n+1,2)){const t=g(e,">",n,"DOCTYPE is not closed.");n=e.substring(n,t).indexOf("[")>=0?e.indexOf("]>",n)+1:t}else if("!["===e.substr(n+1,2)){const s=g(e,"]]>",n,"CDATA is not closed.")-2,o=e.substring(n+9,s);if(u&&(a.val=i.getValue(a.val)+""+c(a.tagname,u,t),u=""),t.cdataTagName){const e=new r(t.cdataTagName,a,o);a.addChild(e),a.val=i.getValue(a.val)+t.cdataPositionChar,o&&(e.val=o)}else a.val=(a.val||"")+(o||"");n=s+2}else{const s=f(e,n+1);let o=s.data;const l=s.index,d=o.indexOf(" ");let h=o,g=!0;if(-1!==d&&(h=o.substr(0,d).replace(/\s\s*$/,""),o=o.substr(d+1)),t.ignoreNameSpace){const e=h.indexOf(":");-1!==e&&(h=h.substr(e+1),g=h!==s.data.substr(e+1))}if(a&&u&&"!xml"!==a.tagname&&(a.val=i.getValue(a.val)+""+c(a.tagname,u,t)),o.length>0&&o.lastIndexOf("/")===o.length-1){"/"===h[h.length-1]?(h=h.substr(0,h.length-1),o=h):o=o.substr(0,o.length-1);const e=new r(h,a,"");h!==o&&(e.attrsMap=p(o,t)),a.addChild(e)}else{const e=new r(h,a);t.stopNodes.length&&t.stopNodes.includes(e.tagname)&&(e.startIndex=l),h!==o&&g&&(e.attrsMap=p(o,t)),a.addChild(e),a=e}u="",n=l}else u+=e[n];return n}},153:e=>{const t=/^[-+]?0x[a-fA-F0-9]+$/,n=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/,i={hex:!0,leadingZeros:!0,decimalPoint:"."};e.exports=function(e,s={}){if(s=Object.assign({},i,s),!e||"string"!=typeof e)return e;let r=e.trim();if(void 0!==s.skipLike&&s.skipLike.test(r))return e;if(s.hex&&t.test(r))return Number.parseInt(r,16);{const t=n.exec(r);if(t){t[1];const n=t[2],i=t[3];return t[4]||t[6],1===n.length&&"."===i[0]?Number(e):!s.leadingZeros&&n.length>0?e:Number(r)}return e}}},94:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KeybindingsJsonGenerator=void 0,t.KeybindingsJsonGenerator=class{static async gene(e){return JSON.stringify(e,void 0,4)}}},642:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImporterTypePickerList=t.DEFAULT=t.XML_FILE=void 0,t.XML_FILE={label:"Import from XML file",detail:"Import key maps (schemas) from IntelliJ settings."},t.DEFAULT={label:"Use Default"},t.ImporterTypePickerList=[t.XML_FILE,t.DEFAULT]},521:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OSPickerList=t.WINDOWS_TO_WINDOWS=t.WINDOWS_TO_MAC=t.WINDOWS_TO_LINUX=t.MAC_TO_WINDOWS=t.MAC_TO_MAC=t.MAC_TO_LINUX=t.LINUX_TO_WINDOWS=t.LINUX_TO_MAC=t.LINUX_TO_LINUX=void 0,t.LINUX_TO_LINUX={label:"Linux to Linux"},t.LINUX_TO_MAC={label:"Linux to Mac"},t.LINUX_TO_WINDOWS={label:"Linux to Windows"},t.MAC_TO_LINUX={label:"Mac to Linux"},t.MAC_TO_MAC={label:"Mac to Mac"},t.MAC_TO_WINDOWS={label:"Mac to Windows"},t.WINDOWS_TO_LINUX={label:"Windows to Linux"},t.WINDOWS_TO_MAC={label:"Windows to Mac"},t.WINDOWS_TO_WINDOWS={label:"Windows to Windows"},t.OSPickerList=[t.LINUX_TO_LINUX,t.LINUX_TO_MAC,t.LINUX_TO_WINDOWS,t.MAC_TO_LINUX,t.MAC_TO_MAC,t.MAC_TO_WINDOWS,t.WINDOWS_TO_LINUX,t.WINDOWS_TO_MAC,t.WINDOWS_TO_WINDOWS]},288:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IntelliJKeymapXML=void 0;class n{constructor(e,t,n){this.actionId=e,this.first=t,this.second=n}}t.IntelliJKeymapXML=n,n.INTELLIJ_KEY_DELIMITTER=/ /g,n.INTELLIJ_META_KEY=/meta/g},652:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionIdCommandMapping=void 0,t.ActionIdCommandMapping=class{constructor(e,t){this.intellij=e,this.vscode=t}}},84:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KeystrokeKeyMapping=void 0,t.KeystrokeKeyMapping=class{constructor(e,t){this.intellij=new RegExp(`\\b${e}\\b`,"g"),this.vscode=t}}},7:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VSCodeKeyAbstract=void 0;class n{constructor(e,t){this.keystrokeKeyMappings=t,this.key=this.convert(e.first),e.second&&(this.key+=n.VSCODE_SECOND_DELIMITER+this.convert(e.second))}convert(e){for(let t of this.keystrokeKeyMappings)e=e.replace(t.intellij,t.vscode);return e}}t.VSCodeKeyAbstract=n,n.VSCODE_SECOND_DELIMITER=" "},404:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VSCodeKeyLinux=void 0;const i=n(7);class s extends i.VSCodeKeyAbstract{}t.VSCodeKeyLinux=s},962:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VSCodeKeyMac=void 0;const i=n(288),s=n(7);class r extends s.VSCodeKeyAbstract{convert(e){return super.convert(e).replace(i.IntelliJKeymapXML.INTELLIJ_META_KEY,r.VSCODE_META)}}t.VSCodeKeyMac=r,r.VSCODE_META="cmd"},878:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VSCodeKeyWindows=void 0;const i=n(288),s=n(7);class r extends s.VSCodeKeyAbstract{convert(e){return super.convert(e).replace(i.IntelliJKeymapXML.INTELLIJ_META_KEY,r.VSCODE_META)}}t.VSCodeKeyWindows=r,r.VSCODE_META="win"},827:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VSCodeKeybindingDefault=void 0,t.VSCodeKeybindingDefault=class{constructor(e,t,n){this.command=e,this.key=t,this.when=n}}},545:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionIdCommandMappingJsonParser=void 0;const i=n(652);t.ActionIdCommandMappingJsonParser=class{static async desirialize(e){if(!e)return[];const t=new Array,n=JSON.parse(e);for(let e=0;e<n.length;e++){const s=n[e],r=new i.ActionIdCommandMapping(s.intellij,s.vscode);t.push(r)}return t}}},371:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IntelliJXMLParser=void 0;const i=n(965),s=n(288);t.IntelliJXMLParser=class{static async parseToJson(e){if(e){if(!i.validate(e))throw Error("Cannot load this IntelliJ IDEA Keymap file. Plesase check the file format.");return i.parse(e,{ignoreAttributes:!1,parseAttributeValue:!0,arrayMode:!0})}}static async desirialize(e){if(!e||!e.keymap)return[];const t=new Array,n=e.keymap[0].action;for(const e in n){const i=n[e]["@_id"],r=n[e]["keyboard-shortcut"];for(const e in r){const n=r[e],a=n["@_first-keystroke"],o=n["@_second-keystroke"],l=new s.IntelliJKeymapXML(i,a,o);t.push(l)}}return t}}},537:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KeystrokeKeyMappingJsonParser=void 0;const i=n(84);t.KeystrokeKeyMappingJsonParser=class{static async desirialize(e){if(!e)return[];const t=new Array,n=JSON.parse(e);for(let e=0;e<n.length;e++){const s=n[e],r=new i.KeystrokeKeyMapping(s.intellij,s.vscode);t.push(r)}return t}}},863:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VSCodeJsonParser=void 0;const i=n(827);t.VSCodeJsonParser=class{static async desirialize(e){if(!e)return[];const t=new Array;return JSON.parse(e).map((e=>{const n=new i.VSCodeKeybindingDefault(e.command,e.key,e.when);t.push(n)})),t}}},236:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileOpenDialog=void 0;const i=n(496),s=n(923);t.FileOpenDialog=class{static async showXml(){const e=await i.window.showOpenDialog({canSelectFiles:!0,filters:{XML:["xml"]}});if(e&&e[0])return s.FileReader.read(e[0])}}},923:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileReader=void 0;const i=n(496);t.FileReader=class{static async read(e){const t=await i.workspace.fs.readFile(e);return Buffer.from(t).toString("utf8")}}},446:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileReaderDefault=void 0;const i=n(17),s=n(496),r=n(923);class a{static async readIntelliJ(e,t){const n=s.Uri.file(t.asAbsolutePath(i.posix.join(this.DEFAULT_PATH,e,"IntelliJ.xml")));return r.FileReader.read(n)}static async readVSCode(e,t){const n=s.Uri.file(t.asAbsolutePath(i.posix.join(this.DEFAULT_PATH,e,"VSCode.json")));return r.FileReader.read(n)}static async readActionIdCommandMapping(e){const t=s.Uri.file(e.asAbsolutePath(i.posix.join(this.RESOURCE_PATH,"ActionIdCommandMapping.json")));return r.FileReader.read(t)}static async readKeystrokeKeyMapping(e){const t=s.Uri.file(e.asAbsolutePath(i.posix.join(this.RESOURCE_PATH,"KeystrokeKeyMapping.json")));return r.FileReader.read(t)}}t.FileReaderDefault=a,a.RESOURCE_PATH="resource",a.DEFAULT_PATH=i.posix.join(a.RESOURCE_PATH,"default")},777:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Picker=void 0;const i=n(496),s=n(642),r=n(521);t.Picker=class{static async pickImporterType(){switch(await i.window.showQuickPick(s.ImporterTypePickerList,{placeHolder:"Which OS do you want to convert for?",ignoreFocusOut:!0})){case s.XML_FILE:return"XmlFile";case s.DEFAULT:return"Default";case void 0:return}}static async pickOSDestionation(){switch(await i.window.showQuickPick(r.OSPickerList,{placeHolder:"Which OS do you want to convert for?",ignoreFocusOut:!0})){case r.LINUX_TO_LINUX:return{src:"Linux",dst:"Linux"};case r.LINUX_TO_MAC:return{src:"Linux",dst:"Mac"};case r.LINUX_TO_WINDOWS:return{src:"Linux",dst:"Windows"};case r.MAC_TO_LINUX:return{src:"Mac",dst:"Linux"};case r.MAC_TO_MAC:return{src:"Mac",dst:"Mac"};case r.MAC_TO_WINDOWS:return{src:"Mac",dst:"Windows"};case r.WINDOWS_TO_LINUX:return{src:"Windows",dst:"Linux"};case r.WINDOWS_TO_MAC:return{src:"Windows",dst:"Mac"};case r.WINDOWS_TO_WINDOWS:return{src:"Windows",dst:"Windows"};case void 0:return}}}},59:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IntelliJSyntaxAnalyzer=void 0;const i=n(827),s=n(404),r=n(962),a=n(878);class o{constructor(e,t,n,s,r,a){this.addCustomIntelliJ=(e,t,n,s)=>{const r=this.convertToKey(s).key,a=t.when,o=t.command;return e.some((e=>e.key===r&&e.command===o&&e.when===a))?void 0:new i.VSCodeKeybindingDefault(o,r,a)},this.addDefaultIntelliJ=(e,t,n)=>{const s=this.convertToKey(n).key,r=t.when,a=t.command;return e.some((e=>e.key===s&&e.command===a&&e.when===r))?void 0:new i.VSCodeKeybindingDefault(a,s,r)},this.removeDefaultVSCode=(e,t,n,s)=>{const r=t.key,a=t.command;if(e.some((e=>e.key===r&&e.command.endsWith(a))))return;const l=`${o.REMOVE_KEYBINDING}${a}`;return new i.VSCodeKeybindingDefault(l,r)},this.removeDefaultIntelliJ=(e,t,n,s)=>{const r=this.convertToKey(n).key,a=t.command;if(e.some((e=>e.key===r&&e.command.endsWith(a))))return;const l=`${o.REMOVE_KEYBINDING}${a}`;return new i.VSCodeKeybindingDefault(l,r)},this.osDestination=e,this.actionIdCommandMappings=o.groupBy(t,(e=>e.intellij)),this.keystrokeKeyMappings=n,this.vscodeDefaults=o.groupBy(s,(e=>e.command)),this.intellijDefaults=r,this.intellijCustoms=o.groupBy(a,(e=>e.actionId))}async convert(){let e=[];const t=this.action(e,this.addCustomIntelliJ);e=e.concat(t);const n=this.action(e,void 0,this.addDefaultIntelliJ);e=e.concat(n);const i=this.action(e,this.removeDefaultVSCode,this.removeDefaultVSCode);e=e.concat(i);const s=this.action(e,this.removeDefaultIntelliJ,this.removeDefaultIntelliJ);return e=e.concat(s),e}action(e,t,n){const i=[];for(let s of this.intellijDefaults)if(this.actionIdCommandMappings[s.actionId])for(let r of this.actionIdCommandMappings[s.actionId]){const a=r.intellij,o=r.vscode;if(this.vscodeDefaults[o])for(let r of this.vscodeDefaults[o])if(this.intellijCustoms[a]){if(t)for(let n of this.intellijCustoms[a]){const a=t(i.concat(e),r,s,n);a&&i.push(a)}}else if(n){const t=n(i.concat(e),r,s,void 0);t&&i.push(t)}}return i}convertToKey(e){switch(this.osDestination){case"Linux":return new s.VSCodeKeyLinux(e,this.keystrokeKeyMappings);case"Mac":return new r.VSCodeKeyMac(e,this.keystrokeKeyMappings);case"Windows":return new a.VSCodeKeyWindows(e,this.keystrokeKeyMappings)}}static groupBy(e,t){return e.reduce(((e,n)=>{var i;const s=t(n);return e[s]=null!==(i=e[s])&&void 0!==i?i:[],e[s].push(n),e}),{})}}t.IntelliJSyntaxAnalyzer=o,o.REMOVE_KEYBINDING="-"},514:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileOpen=void 0;const i=n(496);t.FileOpen=class{static async openText(e){return await i.workspace.openTextDocument({language:"json",content:e})}static async showKeybindingsJson(e){await i.commands.executeCommand("workbench.action.openGlobalKeybindingsFile");const t=new i.Range(e.lineAt(0).range.start,e.lineAt(e.lineCount-1).range.end);await i.window.showTextDocument(e,{selection:t}),await i.window.showInformationMessage("Please copy & paste it into keybindings.json")}}},496:e=>{"use strict";e.exports=require("vscode")},17:e=>{"use strict";e.exports=require("path")}},t={};function n(i){var s=t[i];if(void 0!==s)return s.exports;var r=t[i]={exports:{}};return e[i](r,r.exports,n),r.exports}var i={};(()=>{"use strict";var e=i;Object.defineProperty(e,"__esModule",{value:!0}),e.importKeyMapsSchema=e.activate=void 0;const t=n(496),s=n(94),r=n(545),a=n(371),o=n(537),l=n(863),c=n(236),u=n(446),d=n(777),h=n(59),p=n(514);async function f(e){const t=await d.Picker.pickImporterType();if(!t)return;const n=await d.Picker.pickOSDestionation();if(!n)return;let i;if("XmlFile"===t&&(i=await c.FileOpenDialog.showXml(),!i))return;const f=await u.FileReaderDefault.readIntelliJ(n.src,e),g=await u.FileReaderDefault.readVSCode(n.src,e),m=await u.FileReaderDefault.readActionIdCommandMapping(e),y=await u.FileReaderDefault.readKeystrokeKeyMapping(e),v=await a.IntelliJXMLParser.parseToJson(i),b=await a.IntelliJXMLParser.parseToJson(f),N=await a.IntelliJXMLParser.desirialize(v),O=await a.IntelliJXMLParser.desirialize(b),C=await l.VSCodeJsonParser.desirialize(g),A=await r.ActionIdCommandMappingJsonParser.desirialize(m),M=await o.KeystrokeKeyMappingJsonParser.desirialize(y),_=new h.IntelliJSyntaxAnalyzer(n.dst,A,M,C,O,N),I=await _.convert(),T=await s.KeybindingsJsonGenerator.gene(I),x=await p.FileOpen.openText(T);await p.FileOpen.showKeybindingsJson(x)}e.activate=function(e){e.subscriptions.push(t.commands.registerCommand("intellij.importKeyMapsSchema",(async()=>await f(e))))},e.importKeyMapsSchema=f})();var s=exports;for(var r in i)s[r]=i[r];i.__esModule&&Object.defineProperty(s,"__esModule",{value:!0})})();